(this["webpackJsonpxlllbot-client"]=this["webpackJsonpxlllbot-client"]||[]).push([[0],{112:function(e,t){},127:function(e,t,a){"use strict";a.r(t);var n,c=a(0),l=a.n(c),r=a(21),o=a.n(r),s=(a(64),a(8)),i=a(9),m=a(11),d=a(10),u=a(12),h=a(4),p=a(5),E=a(53),v=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(E.Scrollbars,{autoHide:!0,renderTrackHorizontal:function(e){return l.a.createElement("div",Object.assign({},e,{className:"track-horizontal"}))},renderTrackVertical:function(e){return l.a.createElement("div",Object.assign({},e,{className:"track-vertical"}))},renderThumbHorizontal:function(e){return l.a.createElement("div",Object.assign({},e,{className:"thumb-horizontal"}))},renderThumbVertical:function(e){return l.a.createElement("div",Object.assign({},e,{className:"thumb-vertical"}))},renderView:function(t){return l.a.createElement("div",Object.assign({},t,{className:e.props.className}))}},this.props.children)}}]),t}(c.Component),b=a(28),f="http://localhost:7000",_=localStorage.getItem("userLogin"),g="Basic "+btoa(localStorage.getItem("userLogin")+":"+localStorage.getItem("sessId")),N=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this)))._isMounted=!1,e.isAuth=!!localStorage.getItem("sessId")&&!!_,e.state={showMenu:!1,logo:localStorage.getItem("userLogo")},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,document.addEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.removeEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"toggleMenu",value:function(){this._isMounted&&this.setState({showMenu:!this.state.showMenu})}},{key:"closeMenu",value:function(){this._isMounted&&this.setState({showMenu:!1})}},{key:"handleOutsideClick",value:function(e){e.target.closest(".open")||this.closeMenu()}},{key:"render",value:function(){var e=this.state.logo,t=this.state.showMenu?"open":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{id:"header",className:t},l.a.createElement("div",{className:"logo"},l.a.createElement("i",{onClick:this.toggleMenu.bind(this),className:"logo__trigger material-icons"},"menu"),l.a.createElement("h1",null,"xlllBot")),this.isAuth&&l.a.createElement("ul",{className:"top-menu"},l.a.createElement("li",{className:"top-menu__profile"},l.a.createElement(h.b,{to:"/dashboard/channel"},l.a.createElement("span",{className:"userName"},_||""),l.a.createElement("div",{className:"userPhoto",style:{backgroundImage:"url(".concat(e||"",")")}}))))),l.a.createElement("aside",{id:"navigation",className:t},l.a.createElement(v,{className:"navigation__menu"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(h.c,{exact:!0,to:"/",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"home"),"Home")),this.isAuth&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/channel",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"person"),"Channel")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/commands",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"list"),"Commands")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/badwords",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"voice_over_off"),"Badwords")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/songs",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"playlist_play"),"Stream Dj")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/events",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"playlist_add_check"),"Events")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/settings",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"settings"),"Settings"))),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/commands",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"list"),"All commands"))))))}}]),t}(c.Component),O=a(2),y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).isAuth=!!localStorage.getItem("sessId")&&!!localStorage.getItem("userLogin"),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.isAuth||O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT})}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(b.a)(t,["component"]);return l.a.createElement(p.b,Object.assign({},n,{render:function(t){return e.isAuth?l.a.createElement("div",{className:"content"},l.a.createElement(N,null),l.a.createElement(a,t)):l.a.createElement(p.a,{to:{pathname:"/",state:{from:t.location}}})}}))}}]),t}(c.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=Object(b.a)(e,["component"]);return l.a.createElement(p.b,Object.assign({},a,{render:function(e){return l.a.createElement("div",{className:"content"},l.a.createElement(N,null),l.a.createElement(t,e))}}))}}]),t}(c.Component),w=a(55),T=a.n(w)()(f),k=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={isAuth:!1,authClicked:!1},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="xlllBot",T.on("user_data",(function(t){e.state.authClicked&&(t.error||localStorage.getItem("sessId")&&localStorage.getItem("userLogin")||(e.setState({isAuth:!0,authClicked:!1}),localStorage.setItem("userLogin",t.login),localStorage.setItem("userLogo",t.logo),e.timeout=setTimeout((function(){return window.location.href="/dashboard/channel"}),2e3)))}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"openAuth",value:function(e){this.setState({authClicked:!0}),window.open(e,"Sign in via Twitch","height=520,width=480")}},{key:"render",value:function(){return l.a.createElement("main",{className:"landing"},l.a.createElement("div",{className:"bg"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"landing_content"},l.a.createElement("h1",{className:"main_head"},"xlllBot"),l.a.createElement("div",{className:"main_sub"},"Chat bot for Twitch"),l.a.createElement("div",{className:"auth_block_main"},localStorage.getItem("sessId")&&localStorage.getItem("userLogin")||this.state.isAuth?l.a.createElement(h.b,{className:"twitch_btn_main",to:"/dashboard/channel"},"Open dashboard"):l.a.createElement("div",{onClick:this.openAuth.bind(this,f+"/auth/twitch"),className:"twitch_btn_main"},l.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},l.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),l.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),l.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch"))),l.a.createElement("div",{className:"main_copy"},l.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll"))))}}]),t}(c.Component),I=a(13),S=a.n(I),j=a(17),M=a(7),C=function(){var e=!!localStorage.getItem("sessId")&&!!localStorage.getItem("userLogin");return l.a.createElement("footer",{className:"content--boxed-sm",id:"footer"},l.a.createElement("div",{className:"other_copy"},"xlllBot 2020 ",l.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll")),e&&l.a.createElement("ul",{className:"footer__menu"},l.a.createElement("li",null,l.a.createElement(h.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/commands"},"Commands")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/badwords"},"Badwords")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/settings"},"Settings"))))},B=function(){return l.a.createElement("div",{className:"content_loader"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},l.a.createElement("circle",{cx:"50",cy:"50",fill:"none",stroke:"#fff",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(359.289 50.0009 50.0009)"},l.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.2s",begin:"0s",repeatCount:"indefinite"}))))},P=function(){var e=Object(p.g)(),t=Object(c.useState)(""),a=Object(M.a)(t,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){document.title="xlllBot - Channel",function(){var t=Object(j.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(f+"/api/channel",{headers:{Authorization:g}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return localStorage.clear(),O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT}),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:n=t.sent,r(n[0]),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm videoblock"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Channel ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("div",{id:"content_inner",className:"videos_inner"},l.a.createElement("div",{className:"vid-main-wrapper"},l.a.createElement("div",{className:"vid-container"},n?l.a.createElement("iframe",{title:"TwitchPlayer",src:"https://player.twitch.tv/?channel=".concat(localStorage.getItem("userLogin"),"&parent=").concat("localhost"),frameBorder:"0",allowFullScreen:!0,scrolling:"no",width:"560",height:"384"}):l.a.createElement(B,null)),l.a.createElement("div",{className:"vid-list-container"},l.a.createElement("ul",null,l.a.createElement("ol",{id:"vid-list",style:{lineHeight:0}},n?l.a.createElement("iframe",{title:"TwitchChat",src:"https://www.twitch.tv/embed/".concat(localStorage.getItem("userLogin"),"/chat?darkpopout&parent=").concat("localhost"),frameBorder:"0",scrolling:"no",width:"284",height:"384"}):null)))))))))),l.a.createElement(C,null))},L=a(19),D=function(e){return l.a.createElement("div",{className:"empty-results"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:112,height:112,viewBox:"0 0 24 24"},l.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:"#8e9399"})),l.a.createElement("div",{className:"empty_words"},l.a.createElement("div",{className:"empty_top"},e.message)))},V=function(){var e=Object(p.g)(),t=Object(c.useState)(!1),a=Object(M.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(!1),s=Object(M.a)(o,2),i=s[0],m=s[1],d=Object(c.useState)([]),u=Object(M.a)(d,2),h=u[0],E=u[1];Object(c.useEffect)((function(){document.title="xlllBot - Commands",function(){var t=Object(j.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(f+"/api/commands/all",{headers:{Authorization:g}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return localStorage.clear(),O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT}),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?(n.reverse(),E(n)):m(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),m(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var v=function(){r(!n)},b=function(e,t){E(h.filter((function(t){return t._id!==e}))),0===h.filter((function(t){return t._id!==e})).length&&(E([]),m(!0)),fetch(f+"/api/commands/delete?id="+e,{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(){return O.b.success("Command successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to delete command",{position:O.b.POSITION.BOTTOM_RIGHT})}))},_=function(e,t){var a=t.currentTarget.closest(".command_form"),n=a.children[1].value,c=a.children[2].value;n.trim().length<1?(O.b.error("Enter command tag",{position:O.b.POSITION.BOTTOM_RIGHT}),a.children[1].classList.add("error")):c.trim().length<1?(O.b.error("Enter text",{position:O.b.POSITION.BOTTOM_RIGHT}),a.children[1].classList.remove("error"),a.children[2].classList.add("error")):(a.children[1].classList.remove("error"),a.children[2].classList.remove("error"),N(t),fetch(f+"/api/commands/edit?id=".concat(e,"&tag=").concat(n.trim(),"&text=")+c.trim(),{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(){return O.b.success("Command successfully changed",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to change command",{position:O.b.POSITION.BOTTOM_RIGHT})})))},N=function(e){var t=e.currentTarget.closest(".command_form");t.children[1].classList.toggle("active"),t.children[2].classList.toggle("active"),t.children[3].children[0].classList.toggle("none"),t.children[3].children[1].classList.toggle("none")};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Commands ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Commands list"),l.a.createElement("div",{onClick:v,className:"item_add command_add",title:"Add new command"},l.a.createElement("i",{className:"material-icons"},"add")),l.a.createElement("div",{id:"content_inner"},n?l.a.createElement("div",{className:"command_form"},l.a.createElement("div",{className:"command_prefix"},"!"),l.a.createElement("input",{className:"input_text command_name active",type:"text",placeholder:"Enter command"}),l.a.createElement("input",{className:"input_text command_text active",type:"text",placeholder:"Enter text"}),l.a.createElement("div",{className:"command_actions"},l.a.createElement("i",{onClick:v,className:"item_cancel command_new_cancel material-icons",title:"Chancel new command"},"close"),l.a.createElement("input",{onClick:function(e){var t=e.currentTarget.closest(".command_form"),a=t.children[1].value,n=t.children[2].value;a.trim().length<1?(O.b.error("Enter command tag",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[1].classList.add("error")):n.trim().length<1?(O.b.error("Enter text",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[1].classList.remove("error"),t.children[2].classList.add("error")):(t.children[1].classList.remove("error"),t.children[2].classList.remove("error"),fetch(f+"/api/commands/add?tag=".concat(a.trim().replace("!",""),"&text=")+n.trim(),{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw D("Failed to adding command");m(!1),E([e].concat(Object(L.a)(h))),v(),O.b.success("Command successfully added",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to adding command",{position:O.b.POSITION.BOTTOM_RIGHT})})))}.bind(void 0),className:"command_create btn",type:"submit",value:"Add"}))):null,h.length>0?h.map((function(e){return l.a.createElement("div",{className:"command_form",key:e._id},l.a.createElement("div",{className:"command_prefix"},"!"),l.a.createElement("input",{className:"input_text command_name",type:"text",placeholder:"Enter command",defaultValue:e.tag}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Enter text",defaultValue:e.text}),l.a.createElement("div",{className:"command_actions"},l.a.createElement("div",{className:"action_block"},l.a.createElement("i",{onClick:N.bind(void 0),className:"command_edit material-icons",title:"Edit command"},"create"),l.a.createElement("i",{onClick:b.bind(void 0,e._id),className:"item_delete command_delete material-icons",title:"Delete command"},"delete")),l.a.createElement("div",{className:"action_block none"},l.a.createElement("i",{onClick:N.bind(void 0),className:"item_cancel command_edit_cancel material-icons",title:"Cancel changes"},"close"),l.a.createElement("input",{onClick:_.bind(void 0,e._id),className:"command_save btn",type:"submit",value:"Save"}))))})):i?l.a.createElement(D,{message:"No commands yet"}):l.a.createElement(B,null))))))),l.a.createElement(C,null))},R=function(){var e=Object(p.g)(),t=Object(c.useState)(!1),a=Object(M.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(!1),s=Object(M.a)(o,2),i=s[0],m=s[1],d=Object(c.useState)([]),u=Object(M.a)(d,2),h=u[0],E=u[1];Object(c.useEffect)((function(){document.title="xlllBot - Badwords",function(){var t=Object(j.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(f+"/api/words/all",{headers:{Authorization:g}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return localStorage.clear(),O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT}),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?(n.reverse(),E(n)):m(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),m(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var v=function(){r(!n)},b=function(e,t){E(h.filter((function(t){return t._id!==e}))),0===h.filter((function(t){return t._id!==e})).length&&(E([]),m(!0)),fetch(f+"/api/words/delete?id="+e,{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(){return O.b.success("Badword successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to delete badword",{position:O.b.POSITION.BOTTOM_RIGHT})}))};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Badwords ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Badwords list"),l.a.createElement("div",{onClick:v,className:"item_add badword_add",title:"Add new badword"},l.a.createElement("i",{className:"material-icons"},"add")),l.a.createElement("div",{id:"content_inner"},n?l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text badword_name active",type:"text",placeholder:"Enter badword"}),l.a.createElement("input",{className:"input_text badword_duration active",type:"number",placeholder:"Enter ban duration",defaultValue:"300"}),l.a.createElement("div",{className:"channel_actions"},l.a.createElement("i",{onClick:v,className:"item_cancel badword_new_cancel material-icons",title:"Cancel new badword"},"close"),l.a.createElement("input",{onClick:function(e){var t=e.currentTarget.closest(".command_form"),a=t.children[0].value,n=t.children[1].value;a.trim().length<1?(O.b.error("Enter name",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[0].classList.add("error")):n.trim().length<1?(O.b.error("Enter duration",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[0].classList.remove("error"),t.children[1].classList.add("error")):(t.children[0].classList.remove("error"),t.children[1].classList.remove("error"),fetch(f+"/api/words/add?word=".concat(a.trim(),"&duration=")+n.trim(),{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw D("Failed to adding badword");m(!1),E([e].concat(Object(L.a)(h))),v(),O.b.success("Badword successfully added",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to adding badword",{position:O.b.POSITION.BOTTOM_RIGHT})})))}.bind(void 0),className:"badword_create btn",type:"submit",value:"Add"}))):null,h.length>0?h.map((function(e){return l.a.createElement("div",{className:"command_form",key:e._id},l.a.createElement("input",{className:"input_text badword_name",type:"text",placeholder:"Badword",defaultValue:e.word}),l.a.createElement("input",{className:"input_text badword_duration",type:"text",placeholder:"Ban duration",defaultValue:e.duration}),l.a.createElement("div",{className:"channel_actions"},l.a.createElement("i",{onClick:b.bind(void 0,e._id),className:"item_delete badword_delete material-icons",title:"Delete badword"},"delete")))})):i?l.a.createElement(D,{message:"No badwords yet"}):l.a.createElement(B,null))))))),l.a.createElement(C,null))},H=a(22),G=a(56),A=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this)))._isMounted=!1,e.state={response:[],playIndex:0,noData:!1},e.playBtnRef=l.a.createRef(),e.onPlay=e.onPlay.bind(Object(H.a)(e)),e.onPause=e.onPause.bind(Object(H.a)(e)),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="xlllBot - Stream Dj",this._isMounted=!0,T.emit("video_items",{channel:_}),this.subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"subscribeToEvents",value:function(){var e=this;this._isMounted&&(T.on("output_videos",(function(t){t.length>0?e.setState({response:t}):e.setState({noData:!0})})),T.on("new_video",(function(t){t.channel===_&&e.setState({response:[].concat(Object(L.a)(e.state.response),[t]),noData:!1})})),T.on("deteted",(function(t){e.setState({response:e.state.response.filter((function(e){return e._id!==t.id}))}),O.b.success("Video successfully removed",{position:O.b.POSITION.BOTTOM_RIGHT}),0===e.state.response.filter((function(e){return e._id!==t.id})).length&&e.setState({noData:!0})})),T.on("skip",(function(t){t.channel===_&&1===n.getPlayerState()&&e.skip()})))}},{key:"deleteVideo",value:function(e,t){t.stopPropagation(),T.emit("delete_video",{id:e,channel:_})}},{key:"toHHMMSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),c=t-3600*a-60*n;return(a||"")+(a>0?":":"")+(n<10&&a>0?"0":"")+n+":"+(c<10?"0":"")+c}},{key:"counter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<1e3?e:e>=1e3&&e<1e6?"".concat(+(e/1e3).toFixed(1),"K"):e>=1e6&&e<1e9?"".concat(+(e/1e6).toFixed(1),"M"):e>=1e9&&e<1e12?"".concat(+(e/1e9).toFixed(1),"B"):void 0}},{key:"youtubeId",value:function(e){var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return null!==t?t[1]:0}},{key:"onPlayerReady",value:function(e){n=e.target}},{key:"onPlay",value:function(){this.playBtnRef.current.classList.add("playing")}},{key:"onPause",value:function(){this.playBtnRef.current.classList.remove("playing")}},{key:"onPlayPause",value:function(){void 0!==n&&(1===n.getPlayerState()?n.pauseVideo():n.playVideo())}},{key:"chooseVideo",value:function(e,t){this._isMounted&&(this.setState({playIndex:Number(e.index)}),void 0!==n&&n.loadVideoById(this.youtubeId(e.url)))}},{key:"skip",value:function(){if(this._isMounted){var e=this.state.response;if(0!==e.length){var t=this.state.playIndex+1;t>=e.length&&(t=0),this.setState({playIndex:t});var a=e[t].url;void 0!==n&&n.loadVideoById(this.youtubeId(a))}}}},{key:"render",value:function(){var e=this,t=this.state.response;return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm videoblock"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Stream Dj ",l.a.createElement("small",null,"Dashboard")),l.a.createElement("div",{className:"controls"},l.a.createElement("div",{ref:this.playBtnRef,onClick:this.onPlayPause,className:"play_btn play",title:"Play/Pause"}),l.a.createElement("div",{onClick:this.skip.bind(this),className:"play_btn skip small",title:"Skip"}))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("div",{id:"content_inner",className:"videos_inner"},l.a.createElement("div",{className:"vid-main-wrapper"},l.a.createElement("div",{className:"vid-container"},t.length>0?l.a.createElement(G.a,{opts:{height:"384",width:"560",playerVars:{autoplay:0}},videoId:this.youtubeId(t[0].url),containerClassName:"iframe",onReady:this.onPlayerReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.skip.bind(this)}):this.state.noData?l.a.createElement(D,{message:"No videos yet"}):l.a.createElement(B,null)),l.a.createElement("div",{className:"vid-list-container"},l.a.createElement(v,{className:"view"},l.a.createElement("ul",null,l.a.createElement("ol",{id:"vid-list"},t.length>0?t.map((function(t,a){return l.a.createElement("li",{key:t._id,onClick:e.chooseVideo.bind(e,{url:t.url,index:a}),className:"videoItem".concat(e.state.playIndex===a?" selected":"")},l.a.createElement("div",{className:"chooseVid"},l.a.createElement("span",{className:"vid-thumb",style:{backgroundImage:"url(".concat(t.thumb,")")}},l.a.createElement("div",{className:"vidDuration"},e.toHHMMSS(t.duration))),l.a.createElement("div",{className:"vidInfo"},l.a.createElement("div",{className:"desc"},t.title),l.a.createElement("div",{className:"owner"},t.owner),l.a.createElement("div",{className:"views"},e.counter(t.views)," views")),l.a.createElement("div",{onClick:e.deleteVideo.bind(e,t._id),className:"removeVid",title:"Remove video from playlist"},l.a.createElement("i",{className:"material-icons"},"delete"))))})):null))))))))))),l.a.createElement(C,null))}}]),t}(c.Component),F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this)))._isMounted=!1,e.state={response:[],noData:!1,showClear:!0},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="xlllBot - Events",this._isMounted=!0,T.emit("event_items",{channel:_}),this.subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"subscribeToEvents",value:function(){var e=this;this._isMounted&&(T.on("output_events",(function(t){t.length>0?e.setState({response:t}):e.setState({noData:!0})})),T.on("events_deleted",(function(t){t.deletedCount>0?O.b.success("Old events successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT}):(O.b.info("Nothing to clear",{position:O.b.POSITION.BOTTOM_RIGHT}),e.setState({showClear:!1}))})),T.on("new_event",(function(t){t.channel===_&&e.setState({response:[t].concat(Object(L.a)(e.state.response)),noData:!1})})))}},{key:"deleteEvents",value:function(){T.emit("delete_events",{channel:_})}},{key:"timeFormat",value:function(e){var t,a=new Date,n=new Date(Number(e)),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=a.getFullYear(),r=c[a.getMonth()],o=a.getDate(),s=n.getFullYear(),i=c[n.getMonth()],m=n.getDate(),d=n.getHours(),u=n.getMinutes()<10?"0".concat(n.getMinutes()):n.getMinutes();return t=s!==l?" ".concat(s):"","".concat(m,".").concat(i,".").concat(s)==="".concat(o,".").concat(r,".").concat(l)?"today at ".concat(d,":").concat(u):"".concat(m,".").concat(i,".").concat(s)==="".concat(o-1,".").concat(r,".").concat(l)?"yesterday at ".concat(d,":").concat(u):"".concat(m," ").concat(i).concat(t," at ").concat(d,":").concat(u)}},{key:"render",value:function(){var e=this,t=this.state.response,a=this.state.showClear?"":" none";return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Events ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Chat events by last 24 hrs"),this.state.noData?null:l.a.createElement("div",{className:"clear".concat(a),onClick:this.deleteEvents},l.a.createElement("i",{className:"material-icons"},"delete"),l.a.createElement("span",null,"Delete events older than 24 hours")),l.a.createElement("div",{id:"content_inner"},t.length>0?t.reverse().map((function(t){return l.a.createElement("div",{className:"event_item",key:t._id},l.a.createElement("div",{className:"event_time"},e.timeFormat(t.time)),l.a.createElement("div",null,t.text))})):this.state.noData?l.a.createElement(D,{message:"No events yet"}):l.a.createElement(B,null))))))),l.a.createElement(C,null))}}]),t}(c.Component),z=function(){var e=Object(p.g)(),t=Object(c.useState)([]),a=Object(M.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(!1),s=Object(M.a)(o,2),i=s[0],m=s[1];Object(c.useEffect)((function(){document.title="xlllBot - Settings",function(){var t=Object(j.a)(S.a.mark((function t(){var a,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(f+"/api/settings/all",{headers:{Authorization:g}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return localStorage.clear(),O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT}),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?r(n):m(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),m(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var d=function(e){var t=e.currentTarget.htmlFor,a=!e.currentTarget.parentNode.children[0].checked;fetch(f+"/api/settings?name=".concat(t,"&state=")+a,{headers:{Authorization:g}}).then((function(e){return e.json()})).then((function(){return O.b.success("Settings successfully saved",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to save settings",{position:O.b.POSITION.BOTTOM_RIGHT})}))};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Settings ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Settings list"),l.a.createElement("div",{id:"content_inner"},n.length>0?n.map((function(e){return l.a.createElement("div",{className:"md-checkbox",key:e._id},l.a.createElement("input",{id:e.name,type:"checkbox",defaultChecked:e.state}),l.a.createElement("label",{htmlFor:e.name,onClick:d.bind(void 0),className:"setting_item"},l.a.createElement("span",null,e.description)))})):i?l.a.createElement(D,{message:"Settings not exists"}):l.a.createElement(B,null))))))),l.a.createElement(C,null))},Y=function(){var e=Object(c.useState)([]),t=Object(M.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),o=Object(M.a)(r,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){document.title="xlllBot - All Commands",function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/api/games");case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0?n(a):i(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),i(!0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[]),l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"General commands")),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Commands list"),l.a.createElement("div",{id:"content_inner"},l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!up or !time or !uptime"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Stream duration"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!old or !oldfag or !followage <username or empty>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Channel follow period"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!ping"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Game 'Ping Pong'"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!size <username or empty>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Game 'Size'"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!sr <youtube link>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Video request"})),l.a.createElement("br",null),l.a.createElement("h4",null,"For moderators and owner"),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!mute, !timeout <username> <duration or empty>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Timeout user"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!ban, !permit <username> <reason or empty>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Permanent ban user"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!unban <username>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Unban user"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!skip"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Skip played video"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!game <full game name or short>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Set stream category. Short name is in the list below"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!title <text>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Set stream name"})),l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:"!poll or !vote <Question | variant1 | variant2 | ...>"}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:"Create Stravpoll vote"})))))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Short categores names list"),l.a.createElement("div",{id:"content_inner2"},a.length>0?a.map((function(e){return l.a.createElement("div",{className:"command_form",key:e._id},l.a.createElement("input",{className:"input_text command_name",type:"text",placeholder:"Command",defaultValue:e.short}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Stream category",defaultValue:e.game}))})):s?l.a.createElement(D,{message:"Commands not exists"}):l.a.createElement(B,null))))))),l.a.createElement(C,null))},U=function(e){var t=Object(p.g)(),a=Object(c.useState)(!1),n=Object(M.a)(a,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){document.title="xlllBot - Log in",e.location.search&&new URLSearchParams(e.location.search).get("sess")?(o(!1),localStorage.setItem("sessId",new URLSearchParams(e.location.search).get("sess")),setTimeout((function(){return window.close()}),2e3)):(o(!0),setTimeout((function(){return t.push("/")}),2e3))}),[r,t,e]),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"authModal"},r?l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"error_title"},"You are not authorized"),l.a.createElement("div",{className:"auth_form"},l.a.createElement(h.b,{to:"/",className:"twitch_btn signin"},"Go to home page"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"success_title"},"Successfully logged in"),l.a.createElement("div",{className:"auth_text"},"You can now close this window."))))},J=function(){return document.title="xlllBot - Log in",l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"authModal"},l.a.createElement("h2",{className:"error_title"},"Failed to login"),l.a.createElement("div",{className:"auth_text"},"Try again."),l.a.createElement("div",{className:"auth_form"},l.a.createElement("a",{href:f+"/auth/twitch",class:"twitch_btn signin"},l.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},l.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),l.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),l.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch"))))},W=function(){return document.title="xlllBot - 404 Not Found",l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"authModal"},l.a.createElement("h2",null,"404 Not Found"),l.a.createElement("div",{className:"auth_form"},l.a.createElement(h.b,{to:"/",className:"twitch_btn signin"},"Go to home page"))))};O.b.configure({autoClose:2500});var Z=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){T.on("alert",(function(e){O.b.error(e.message,{position:O.b.POSITION.BOTTOM_RIGHT})}))}},{key:"render",value:function(){return l.a.createElement(v,{className:"view"},l.a.createElement(h.a,null,l.a.createElement(p.d,null,l.a.createElement(p.b,{path:"/",exact:!0,component:k}),l.a.createElement(y,{path:"/dashboard/channel",component:P}),l.a.createElement(y,{path:"/dashboard/commands",component:V}),l.a.createElement(y,{path:"/dashboard/badwords",component:R}),l.a.createElement(y,{path:"/dashboard/songs",component:A}),l.a.createElement(y,{path:"/dashboard/events",component:F}),l.a.createElement(y,{path:"/dashboard/settings",component:z}),l.a.createElement(x,{path:"/commands",component:Y}),l.a.createElement(p.b,{path:"/auth",exact:!0,component:U}),l.a.createElement(p.b,{path:"/auth/error",component:J}),l.a.createElement(p.b,{component:W}))),l.a.createElement(O.a,null))}}]),t}(c.Component);o.a.render(l.a.createElement(Z,null),document.querySelector("#root"))},59:function(e,t,a){e.exports=a(127)},64:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.b854a6a6.chunk.js.map