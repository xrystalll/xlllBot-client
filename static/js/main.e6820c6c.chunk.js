(this["webpackJsonpxlllbot-client"]=this["webpackJsonpxlllbot-client"]||[]).push([[0],{113:function(e,t){},116:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),c=a(21),l=a.n(c),i=(a(68),a(9)),s=a(10),u=a(12),m=a(11),d=a(5),h=a(6),p=a(57),v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(p.Scrollbars,{autoHide:!0,renderTrackHorizontal:function(e){return r.a.createElement("div",Object.assign({},e,{className:"track-horizontal"}))},renderTrackVertical:function(e){return r.a.createElement("div",Object.assign({},e,{className:"track-vertical"}))},renderThumbHorizontal:function(e){return r.a.createElement("div",Object.assign({},e,{className:"thumb-horizontal"}))},renderThumbVertical:function(e){return r.a.createElement("div",Object.assign({},e,{className:"thumb-vertical"}))},renderView:function(t){return r.a.createElement("div",Object.assign({},t,{className:e.props.className}))}},this.props.children)}}]),a}(o.Component),b=a(31),f=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?t[2]:void 0},E=function(){document.cookie.split(";").map((function(e){return document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/"),!0}))},g=a(2),y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).isAuth=!!f("login")&&!!f("token"),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.isAuth||g.b.error("You are not authorized")}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(b.a)(t,["component"]);return r.a.createElement(h.b,Object.assign({},n,{render:function(t){return e.isAuth?r.a.createElement(a,t):r.a.createElement(h.a,{to:{pathname:"/",state:{from:t.location}}})}}))}}]),a}(o.Component),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.component,a=Object(b.a)(e,["component"]);return r.a.createElement(h.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}}))}}]),a}(o.Component),w=a(59),N="http://localhost:7000",x=a.n(w)()(N),k=(a(116),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={isAuth:!1,authClicked:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.title="xlllBot",this._isMounted=!0,f("login")&&f("token")&&this.setState({isAuth:!0}),x.on("auth",(function(t){if(e.state.authClicked&&!t.error){if(!e._isMounted)return;t.auth&&e.setState({isAuth:!0,authClicked:!1}),e.timeout=setTimeout((function(){return e.props.history.push("/dashboard/channel")}),1500)}}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearTimeout(this.timeout)}},{key:"openAuth",value:function(e){this._isMounted&&(this.setState({authClicked:!0}),window.open(e,"Sign in via Twitch","height=520,width=480"))}},{key:"render",value:function(){return r.a.createElement("main",{className:"landing"},r.a.createElement("div",{className:"bg"}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"landing_content"},r.a.createElement("h1",{className:"main_head"},"xlllBot"),r.a.createElement("div",{className:"main_sub"},"Chat bot for Twitch"),r.a.createElement("div",{className:"auth_block_main"},this.state.isAuth?r.a.createElement(d.b,{className:"twitch_btn_main",to:"/dashboard/channel"},"Open dashboard"):r.a.createElement("div",{onClick:this.openAuth.bind(this,N+"/auth/twitch"),className:"twitch_btn_main"},r.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},r.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),r.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),r.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch"))),r.a.createElement("div",{className:"main_copy"},r.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll"))))}}]),a}(o.Component)),j=Object(h.h)(k),O=a(8),C=a.n(O),S=a(16),M=a(4),B=(a(118),function(e){var t=e.title,a=e.action,n=e.className,o=e.children,c=n?" "+n:"";return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__body"},r.a.createElement("div",{className:"card__sub"},!!t&&r.a.createElement("h4",null,t),!!a&&a,r.a.createElement("div",{className:"content_inner"+c},o))))}),T=(a(119),function(e){var t=e.checked,a=e.onChange,n=e.children;return r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onChange:a.bind(void 0),checked:t}),r.a.createElement("span",null,n))}),A=function(e){var t=e.botUsername;return r.a.createElement(B,null,r.a.createElement("div",{className:"error_title"},r.a.createElement("div",{className:"alert_info"},r.a.createElement("i",{className:"material-icons-outlined"},"error_outline"),t," \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u0432 \u0447\u0430\u0442\u0435!")))},D=function(e){var t=e.state,a=e.botUsername,n=e.changeActive;return r.a.createElement(B,null,r.a.createElement("div",{className:t?"success_title":"error_title"},r.a.createElement("div",{className:"alert_info"},r.a.createElement("i",{className:"material-icons-outlined"},"error_outline"),r.a.createElement(T,{onChange:n.bind(void 0),checked:t},"".concat(a,t?" \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a \u0447\u0430\u0442\u0443":" \u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d! \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))))},V=function(e){var t=e.channel;return r.a.createElement("iframe",{title:"TwitchPlayer",src:"https://player.twitch.tv/?channel=".concat(t,"&parent=")+document.location.hostname,frameBorder:"0",allowFullScreen:!0,scrolling:"no",width:"560",height:"384"})},P=function(e){var t=e.channel;return r.a.createElement("iframe",{title:"TwitchChat",src:"https://www.twitch.tv/embed/".concat(t,"/chat?darkpopout&parent=")+document.location.hostname,frameBorder:"0",scrolling:"no",width:"284",height:"384"})},z=a(17),L=(a(120),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this))._isMounted=!1,e.isAuth=!!f("login")&&!!f("token"),e.state={showMenu:!1,login:f("login"),logo:decodeURIComponent(f("logo"))},e.toggleMenu=e.toggleMenu.bind(Object(z.a)(e)),e.closeMenu=e.closeMenu.bind(Object(z.a)(e)),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,document.addEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.removeEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"toggleMenu",value:function(){this._isMounted&&this.setState({showMenu:!this.state.showMenu})}},{key:"closeMenu",value:function(){this._isMounted&&this.setState({showMenu:!1})}},{key:"handleOutsideClick",value:function(e){e.target.closest(".open")||this.closeMenu()}},{key:"render",value:function(){var e=this.state,t=e.login,a=e.logo,n=e.showMenu?"open":"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{id:"header",className:n},r.a.createElement("div",{className:"logo"},r.a.createElement("i",{onClick:this.toggleMenu,className:"logo__trigger material-icons"},"menu"),r.a.createElement("h1",null,"xlllBot")),this.isAuth&&r.a.createElement("ul",{className:"top-menu"},r.a.createElement("li",{className:"top-menu__profile"},r.a.createElement(d.b,{to:"/dashboard/channel"},r.a.createElement("span",{className:"userName"},t||""),r.a.createElement("div",{className:"userPhoto",style:{backgroundImage:"url(".concat(a||"",")")}}))))),r.a.createElement("nav",{id:"navigation",className:n},r.a.createElement(v,{className:"navigation__menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{exact:!0,to:"/",onClick:this.closeMenu},r.a.createElement("i",{className:"nav-ic"},"home"),"Home")),this.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/channel",onClick:this.closeMenu},r.a.createElement("i",{className:"nav-ic"},"person"),"Channel")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/commands",onClick:this.closeMenu},r.a.createElement("i",{className:"material-icons"},"list"),"Commands")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/badwords",onClick:this.closeMenu},r.a.createElement("i",{className:"nav-ic"},"voice_over_off"),"Badwords")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/videos",onClick:this.closeMenu},r.a.createElement("i",{className:"material-icons"},"playlist_play"),"Stream Dj")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/events",onClick:this.closeMenu},r.a.createElement("i",{className:"material-icons"},"playlist_add_check"),"Events")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/dashboard/settings",onClick:this.closeMenu},r.a.createElement("i",{className:"nav-ic"},"settings"),"Settings"))),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/commands",onClick:this.closeMenu},r.a.createElement("i",{className:"material-icons"},"list"),"All commands"))))))}}]),a}(o.Component)),F=(a(121),function(){var e=!!f("login")&&!!f("token");return r.a.createElement("footer",{id:"footer",className:"content--boxed-sm"},r.a.createElement("div",{className:"other_copy"},"xlllBot 2020 ",r.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll")),e&&r.a.createElement("ul",{className:"footer__menu"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/dashboard/commands"},"Commands")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/dashboard/badwords"},"Badwords")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/dashboard/settings"},"Settings")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/",onClick:function(){E()}},"Log out"))))}),U=(a(122),function(e){var t=e.title,a=e.subTitle,n=e.videoLayout,o=e.action,c=e.children,l=n?" videoblock":"";return r.a.createElement("div",{className:"layout"},r.a.createElement(L,null),r.a.createElement("section",{id:"main"},r.a.createElement("div",{className:"content--boxed-sm"+l},r.a.createElement("header",{className:"content__header"},r.a.createElement("h2",null,t," ",!!a&&r.a.createElement("small",null,a)),!!o&&o),c),r.a.createElement(F,null)))}),I=function(){return r.a.createElement("div",{className:"content_loader"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},r.a.createElement("circle",{cx:"50",cy:"50",fill:"none",stroke:"#fff",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(359.289 50.0009 50.0009)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.2s",begin:"0s",repeatCount:"indefinite"}))))},J=function(){var e=Object(h.g)(),t=Object(o.useState)(""),a=Object(M.a)(t,2),n=a[0],c=a[1],l=Object(o.useState)(!0),i=Object(M.a)(l,2),s=i[0],u=i[1],m=Object(o.useState)(!1),d=Object(M.a)(m,2),p=d[0],v=d[1];Object(o.useEffect)((function(){document.title="xlllBot - Channel";var t=function(){var t=Object(S.a)(C.a.mark((function t(){var a,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N+"/api/channel",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return E(),g.b.error("You are not authorized"),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:n=t.sent,c(n[0].name),n[0].bot_active&&v(!0),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(S.a)(C.a.mark((function t(){var a,n,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N+"/api/channel/mods",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return E(),g.b.error("You are not authorized"),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length&&(o=!!n.filter((function(e){return e==="xlllbot".toLowerCase()})).length,u(o)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();t(),a()}),[e]);var b=function(){fetch(N+"/api/bot/join",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);v(!0),g.b.success("Bot successfully joined to chat")})).catch((function(e){v(!1),g.b.error(e?e.message:"Failed to join")}))},y=function(){fetch(N+"/api/bot/leave",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);v(!1),g.b.success("Bot successfully left chat")})).catch((function(e){v(!1),g.b.error(e?e.message:"Failed to leave from chat")}))};return r.a.createElement(U,{title:"Channel",subTitle:"Dashboard",videoLayout:!0},!s&&r.a.createElement(A,{botUsername:"xlllbot"}),r.a.createElement(D,{state:p,botUsername:"xlllbot",changeActive:function(e){e.currentTarget.checked?b():y()}}),r.a.createElement(B,{className:"videos_inner"},r.a.createElement("div",{className:"vid-main-wrapper"},r.a.createElement("div",{className:"vid-container"},n?r.a.createElement(V,{channel:n}):r.a.createElement(I,null)),r.a.createElement("div",{className:"vid-list-container"},r.a.createElement("ul",null,r.a.createElement("ol",{id:"vid-list",style:{lineHeight:0}},!!n&&r.a.createElement(P,{channel:n})))))))},Y=a(18),H=a(30),R=a(41),W=function(e){var t=Object(o.useState)(e),a=Object(M.a)(t,2),n=a[0],r=a[1];return{values:n,handleChange:function(e){r(Object(R.a)(Object(R.a)({},n),{},Object(H.a)({},e.target.name,e.target.value)))},reset:function(){return r(e)}}},G=function(e){var t=e.addCommand,a=e.toggleAdd,n=W({tag:"",text:"",countdown:0}),c=n.values,l=n.handleChange,i=Object(o.useState)(!1),s=Object(M.a)(i,2),u=s[0],m=s[1],d=Object(o.useState)(!1),h=Object(M.a)(d,2),p=h[0],v=h[1],b=Object(o.useState)(!1),f=Object(M.a)(b,2),E=f[0],y=f[1],_=u?" error":"",w=p?" error":"",N=E?" error":"";return r.a.createElement("form",{className:"command_form",onSubmit:function(e){e.preventDefault();var a=c.tag.trim().replace("!",""),n=c.text.trim();a.length<1?(g.b.error("Enter command tag"),m(!0),v(!1),y(!1)):n.length<1?(g.b.error("Enter text"),m(!1),v(!0),y(!1)):c.countdown.length<1?(g.b.error("Enter countdown"),m(!1),v(!1),y(!0)):t({tag:a,text:n,countdown:1*c.countdown})}.bind(void 0)},r.a.createElement("div",{className:"command_prefix"},"!"),r.a.createElement("input",{className:"input_text command_name active"+_,type:"text",name:"tag",onChange:l,placeholder:"Enter command"}),r.a.createElement("input",{className:"input_text command_text active"+w,type:"text",name:"text",onChange:l,placeholder:"Enter text"}),r.a.createElement("input",{className:"input_text command_countdown active"+N,type:"number",name:"countdown",onChange:l,placeholder:"Enter countdown (seconds)",defaultValue:c.countdown}),r.a.createElement("div",{className:"command_actions"},r.a.createElement("i",{onClick:a,className:"item_cancel command_new_cancel material-icons",title:"Chancel new command"},"close"),r.a.createElement("input",{className:"btn",type:"submit",value:"Add"})))},Z=function(e){var t=e.data,a=e.editCommand,n=e.deleteCommand,c=W({tag:t.tag,text:t.text,countdown:t.countdown}),l=c.values,i=c.handleChange,s=Object(o.useState)(!1),u=Object(M.a)(s,2),m=u[0],d=u[1],h=Object(o.useState)(!1),p=Object(M.a)(h,2),v=p[0],b=p[1],f=Object(o.useState)(!1),E=Object(M.a)(f,2),y=E[0],_=E[1],w=Object(o.useState)(!1),N=Object(M.a)(w,2),x=N[0],k=N[1],j=m?" active":"",O=v?" error":"",C=y?" error":"",S=x?" error":"",B=function(){d(!m),b(!1),_(!1),k(!1)};return r.a.createElement("form",{className:"command_form",onSubmit:function(e,t){t.preventDefault();var n=l.tag.trim().replace("!",""),o=l.text.trim();n.length<1?(g.b.error("Enter command tag"),b(!0),_(!1),k(!1)):o.length<1?(g.b.error("Enter text"),b(!1),_(!0),k(!1)):l.countdown.length<1?(g.b.error("Enter countdown"),b(!1),_(!1),k(!0)):(b(!1),_(!1),k(!1),B(),a({id:e,tag:n,text:o,countdown:1*l.countdown}))}.bind(void 0,t._id)},r.a.createElement("div",{className:"command_prefix"},"!"),r.a.createElement("input",{className:"input_text command_name"+j+O,type:"text",name:"tag",onChange:i,placeholder:"Enter command",defaultValue:t.tag}),r.a.createElement("input",{className:"input_text command_text"+j+C,type:"text",name:"text",onChange:i,placeholder:"Enter text",defaultValue:t.text}),r.a.createElement("input",{className:"input_text command_countdown"+j+S,type:"number",name:"countdown",onChange:i,placeholder:"Enter countdown (seconds)",defaultValue:l.countdown}),r.a.createElement("div",{className:"command_actions"},m?r.a.createElement("div",{className:"action_block"},r.a.createElement("i",{onClick:B,className:"item_cancel command_edit_cancel material-icons",title:"Cancel changes"},"close"),r.a.createElement("input",{className:"btn",type:"submit",value:"Save"})):r.a.createElement("div",{className:"action_block"},r.a.createElement("i",{onClick:B,className:"command_edit material-icons",title:"Edit command"},"create"),r.a.createElement("i",{onClick:n.bind(void 0,t._id),className:"item_delete command_delete material-icons",title:"Delete command"},"delete"))))},q=(a(123),function(e){var t=e.icon,a=e.title,n=e.onClick,o=e.className,c=o?" "+o:"";return r.a.createElement("div",{onClick:n,className:"fab"+c,title:a},r.a.createElement("i",{className:"material-icons"},t))}),K=(a(124),function(e){var t=e.message,a=e.size,n=void 0===a?112:a,o=e.color,c=void 0===o?"#8e9399":o;return r.a.createElement("div",{className:"empty-results"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:c})),r.a.createElement("div",{className:"empty_words"},r.a.createElement("div",{className:"empty_top"},t)))}),Q=function(){var e=Object(h.g)(),t=Object(o.useState)(!1),a=Object(M.a)(t,2),n=a[0],c=a[1],l=Object(o.useState)(!1),i=Object(M.a)(l,2),s=i[0],u=i[1],m=Object(o.useState)([]),d=Object(M.a)(m,2),p=d[0],v=d[1];Object(o.useEffect)((function(){document.title="xlllBot - Commands",function(){var t=Object(S.a)(C.a.mark((function t(){var a,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N+"/api/commands/all",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return E(),g.b.error("You are not authorized"),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?(n.reverse(),v(n)):u(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),u(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var b=function(){c(!n)},y=function(e){fetch(N+"/api/commands/delete",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((function(e){return e.json()})).then((function(t){if(t.error)throw Error(t.error);v(p.filter((function(t){return t._id!==e}))),0===p.filter((function(t){return t._id!==e})).length&&(v([]),u(!0)),g.b.success("Command successfully deleted")})).catch((function(e){return g.b.error(e?e.message:"Failed to delete command")}))},_=function(e){fetch(N+"/api/commands/edit",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);g.b.success("Command successfully changed")})).catch((function(e){return g.b.error(e?e.message:"Failed to change command")}))};return r.a.createElement(U,{title:"Commands",subTitle:"Dashboard"},r.a.createElement(B,{title:"Commands list",action:r.a.createElement(q,{icon:n?"close":"add",title:"Add new command",onClick:b})},n&&r.a.createElement(G,{addCommand:function(e){fetch(N+"/api/commands/add",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);u(!1),v([e].concat(Object(Y.a)(p))),b(),g.b.success("Command successfully added")})).catch((function(e){return g.b.error(e?e.message:"Failed to adding command")}))},toggleAdd:b}),p.length>0?p.map((function(e){return r.a.createElement(Z,{key:e._id,data:e,editCommand:_,deleteCommand:y})})):s?r.a.createElement(K,{message:"No commands yet"}):r.a.createElement(I,null)))},$=function(e){var t=e.addBadword,a=e.toggleAdd,n=W({word:"",duration:300}),c=n.values,l=n.handleChange,i=Object(o.useState)(!1),s=Object(M.a)(i,2),u=s[0],m=s[1],d=Object(o.useState)(!1),h=Object(M.a)(d,2),p=h[0],v=h[1],b=u?" error":"",f=p?" error":"";return r.a.createElement("form",{className:"command_form",onSubmit:function(e){e.preventDefault();var a=c.word.trim().toLowerCase();a.length<1?(g.b.error("Enter word"),m(!0),v(!1)):c.duration.length<1?(g.b.error("Enter duration"),m(!1),v(!0)):t({word:a,duration:1*c.duration})}.bind(void 0)},r.a.createElement("input",{className:"input_text badword_name active"+b,type:"text",name:"word",onChange:l,placeholder:"Enter badword"}),r.a.createElement("input",{className:"input_text badword_duration active"+f,type:"number",name:"duration",onChange:l,placeholder:"Enter ban duration (seconds)",defaultValue:c.duration}),r.a.createElement("div",{className:"channel_actions"},r.a.createElement("i",{onClick:a,className:"item_cancel badword_new_cancel material-icons",title:"Cancel new badword"},"close"),r.a.createElement("input",{className:"btn",type:"submit",value:"Add"})))},X=function(e){var t=e.data,a=e.deleteBadword;return r.a.createElement("div",{className:"command_form"},r.a.createElement("input",{className:"input_text badword_name",type:"text",placeholder:"Badword",defaultValue:t.word}),r.a.createElement("input",{className:"input_text badword_duration",type:"text",placeholder:"Ban duration (seconds)",defaultValue:t.duration}),r.a.createElement("div",{className:"channel_actions"},r.a.createElement("i",{onClick:a.bind(void 0,t._id),className:"item_delete badword_delete material-icons",title:"Delete badword"},"delete")))},ee=function(){var e=Object(h.g)(),t=Object(o.useState)(!1),a=Object(M.a)(t,2),n=a[0],c=a[1],l=Object(o.useState)(!1),i=Object(M.a)(l,2),s=i[0],u=i[1],m=Object(o.useState)([]),d=Object(M.a)(m,2),p=d[0],v=d[1];Object(o.useEffect)((function(){document.title="xlllBot - Badwords",function(){var t=Object(S.a)(C.a.mark((function t(){var a,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N+"/api/words/all",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return E(),g.b.error("You are not authorized"),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?(n.reverse(),v(n)):u(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),u(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var b=function(){c(!n)},y=function(e){fetch(N+"/api/words/delete",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((function(e){return e.json()})).then((function(t){if(t.error)throw Error(t.error);v(p.filter((function(t){return t._id!==e}))),0===p.filter((function(t){return t._id!==e})).length&&(v([]),u(!0)),g.b.success("Badword successfully deleted")})).catch((function(e){return g.b.error(e?e.message:"Failed to delete badword")}))};return r.a.createElement(U,{title:"Badwords",subTitle:"Dashboard"},r.a.createElement(B,{title:"Badwords list",action:r.a.createElement(q,{icon:n?"close":"add",title:"Add new badword",onClick:b})},n&&r.a.createElement($,{addBadword:function(e){fetch(N+"/api/words/add",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);u(!1),v([e].concat(Object(Y.a)(p))),b(),g.b.success("Badword successfully added")})).catch((function(e){return g.b.error(e?e.message:"Failed to adding badword")}))},toggleAdd:b}),p.length>0?p.map((function(e){return r.a.createElement(X,{key:e._id,data:e,deleteBadword:y})})):s?r.a.createElement(K,{message:"No badwords yet"}):r.a.createElement(I,null)))},te=a(60),ae=(a(136),function(e){var t=e.index,a=e.playIndex,n=e.data,o=e.chooseVideo,c=e.deleteVideo,l=a===t?" selected":"";return r.a.createElement("li",{className:"video_item"+l,onClick:o.bind(void 0,{id:n.yid,index:t}),title:"Video requested: ".concat(n.from.username,"\nPrice: ").concat(n.from.price)},r.a.createElement("div",{className:"choose_vid"},r.a.createElement("span",{className:"vid_thumb",style:{backgroundImage:"url(".concat(n.thumb,")")}},r.a.createElement("div",{className:"vid_duration"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;return(t||"")+(t>0?":":"")+(a<10&&t>0?"0":"")+a+":"+(n<10?"0":"")+n}(n.duration))),r.a.createElement("div",{className:"vid_info"},r.a.createElement("div",{className:"desc",title:n.title},n.title),r.a.createElement("div",{className:"owner",title:n.owner},n.owner),r.a.createElement("div",{className:"views"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<1e3?e:e>=1e3&&e<1e6?"".concat((e/1e3).toFixed(1),"K"):e>=1e6&&e<1e9?"".concat((e/1e6).toFixed(1),"M"):e>=1e9&&e<1e12?"".concat((e/1e9).toFixed(1),"B"):void 0}(n.views)," views")),r.a.createElement("div",{className:"remove_vid",onClick:c.bind(void 0,n._id),title:"Remove video from playlist"},r.a.createElement("i",{className:"material-icons"},"delete"))))}),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={response:[],playIndex:0,playing:!1,noData:!1},e.onPlay=e.onPlay.bind(Object(z.a)(e)),e.onPause=e.onPause.bind(Object(z.a)(e)),e.chooseVideo=e.chooseVideo.bind(Object(z.a)(e)),e.deleteVideo=e.deleteVideo.bind(Object(z.a)(e)),e.skip=e.skip.bind(Object(z.a)(e)),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="xlllBot - Stream Dj",this._isMounted=!0,x.emit("video_items",{channel:f("login")}),this.subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"subscribeToEvents",value:function(){var e=this;this._isMounted&&(x.on("output_videos",(function(t){t.length>0?e.setState({response:t}):e.setState({noData:!0})})),x.on("new_video",(function(t){t.channel===f("login")&&e.setState({response:[].concat(Object(Y.a)(e.state.response),[t]),noData:!1})})),x.on("deteted",(function(t){e.setState({response:e.state.response.filter((function(e){return e._id!==t.id}))}),0===e.state.response.filter((function(e){return e._id!==t.id})).length&&e.setState({noData:!0})})),x.on("skip",(function(t){t.channel===f("login")&&void 0!==n&&1===n.getPlayerState()&&e.skip()})))}},{key:"onPlayerReady",value:function(e){n=e.target}},{key:"onPlay",value:function(){this.setState({playing:!0})}},{key:"onPause",value:function(){this.setState({playing:!1})}},{key:"onPlayPause",value:function(){void 0!==n&&(1===n.getPlayerState()?n.pauseVideo():n.playVideo())}},{key:"chooseVideo",value:function(e){this._isMounted&&(this.setState({playIndex:Number(e.index)}),void 0!==n&&n.loadVideoById(e.id))}},{key:"skip",value:function(){if(this._isMounted){var e=this.state,t=e.response,a=e.playIndex;if(0!==t.length){var o=a+1;o>=t.length&&(o=0),this.setState({playIndex:o});var r=t[o].yid;void 0!==n&&n.loadVideoById(r)}}}},{key:"deleteVideo",value:function(e,t){t.stopPropagation(),x.emit("delete_video",{id:e,channel:f("login")})}},{key:"render",value:function(){var e=this,t=this.state,a=t.response,n=t.playIndex,o=t.playing,c=t.noData;return r.a.createElement(U,{title:"Stream Dj",subTitle:"Dashboard",videoLayout:!0,action:r.a.createElement("div",{className:"controls"},r.a.createElement(q,{icon:o?"pause":"play_arrow",title:"Play/Pause",onClick:this.onPlayPause,className:"inheader"}),r.a.createElement(q,{icon:"skip_next",title:"Skip",onClick:this.skip,className:"inheader small"}))},r.a.createElement(B,{className:"videos_inner"},r.a.createElement("div",{className:"vid-main-wrapper"},r.a.createElement("div",{className:"vid-container"},a.length>0?r.a.createElement(te.a,{opts:{height:"384",width:"560",playerVars:{autoplay:0}},videoId:a[0].yid,containerClassName:"iframe",onPlay:this.onPlay,onPause:this.onPause,onReady:this.onPlayerReady,onEnd:this.skip}):c?r.a.createElement(K,{message:"No videos yet"}):r.a.createElement(I,null)),r.a.createElement("div",{className:"vid-list-container"},r.a.createElement(v,{className:"view"},r.a.createElement("ul",null,r.a.createElement("ol",{id:"vid-list"},a.length>0&&a.map((function(t,a){return r.a.createElement(ae,{key:t._id,index:a,playIndex:n,data:t,chooseVideo:e.chooseVideo,deleteVideo:e.deleteVideo})})))))))))}}]),a}(o.Component),oe=(a(137),function(e){var t=e.data;return r.a.createElement("div",{className:"event_item"},r.a.createElement("div",{className:"event_time"},function(e){var t,a=new Date,n=new Date(Number(e)),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=a.getFullYear(),c=o[a.getMonth()],l=a.getDate(),i=n.getFullYear(),s=o[n.getMonth()],u=n.getDate(),m=n.getHours(),d=n.getMinutes()<10?"0".concat(n.getMinutes()):n.getMinutes();return t=i!==r?" ".concat(i):"","".concat(u,".").concat(s,".").concat(i)==="".concat(l,".").concat(c,".").concat(r)?"today at ".concat(m,":").concat(d):"".concat(u,".").concat(s,".").concat(i)==="".concat(l-1,".").concat(c,".").concat(r)?"yesterday at ".concat(m,":").concat(d):"".concat(u," ").concat(s).concat(t," at ").concat(m,":").concat(d)}(t.time)),r.a.createElement("div",null,t.text))}),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this))._isMounted=!1,e.state={response:[],noData:!1,showClear:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.title="xlllBot - Events",this._isMounted=!0,x.emit("event_items",{channel:f("login")}),this.subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"subscribeToEvents",value:function(){var e=this;this._isMounted&&(x.on("output_events",(function(t){t.length>0?e.setState({response:t.reverse(),showClear:!0}):e.setState({noData:!0})})),x.on("events_deleted",(function(t){e.setState({showClear:!1}),t.deletedCount>0?(e.setState({response:[],noData:!0}),g.b.success("Old events successfully deleted")):g.b.info("Nothing to clear")})),x.on("new_event",(function(t){t.channel===f("login")&&e.setState({response:[t].concat(Object(Y.a)(e.state.response)),noData:!1})})))}},{key:"deleteEvents",value:function(){x.emit("delete_events",{channel:f("login")})}},{key:"render",value:function(){var e=this.state,t=e.response,a=e.showClear,n=e.noData,o=a?"":" none";return r.a.createElement(U,{title:"Events",subTitle:"Dashboard"},r.a.createElement(B,{title:"Chat events by last 24 hrs",action:!n&&r.a.createElement("div",{className:"clear".concat(o),onClick:this.deleteEvents},r.a.createElement("i",{className:"material-icons"},"delete"),r.a.createElement("span",null,"Delete all events"))},t.length>0?t.map((function(e){return r.a.createElement(oe,{key:e._id,data:e})})):n?r.a.createElement(K,{message:"No events yet"}):r.a.createElement(I,null)))}}]),a}(o.Component),ce=(a(138),function(e){var t=e.data,a=e.changeSetting,n=W({value:t.value}),c=n.values,l=n.handleChange,i=Object(o.useState)(!1),s=Object(M.a)(i,2),u=s[0],m=s[1],d=u?" error":"";return null===t.value||void 0===t.value?r.a.createElement("div",{className:"md-checkbox"},r.a.createElement("input",{id:t.name,type:"checkbox",defaultChecked:t.state}),r.a.createElement("label",{htmlFor:t.name,onClick:function(e,t){var n=!t.currentTarget.parentNode.children[0].checked;a({name:e,state:n})}.bind(void 0,t.name),className:"setting_item"},r.a.createElement("span",null,t.description))):r.a.createElement("form",{className:"md-checkbox",onSubmit:function(e,t){t.preventDefault(),c.value.length<1?(g.b.error("Enter price value"),m(!0)):(m(!1),a({name:e,state:!1,value:1*c.value}))}.bind(void 0,t.name)},r.a.createElement("div",{className:"setting_description"},t.description),r.a.createElement("div",{className:"set_setting_value"},r.a.createElement("input",{className:"input_text active"+d,type:"number",name:"value",onChange:l,placeholder:"Enter price",defaultValue:t.value}),r.a.createElement("input",{className:"btn",type:"submit",value:"Save"})))}),le=function(){var e=Object(h.g)(),t=Object(o.useState)([]),a=Object(M.a)(t,2),n=a[0],c=a[1],l=Object(o.useState)(!1),i=Object(M.a)(l,2),s=i[0],u=i[1];Object(o.useEffect)((function(){document.title="xlllBot - Settings",function(){var t=Object(S.a)(C.a.mark((function t(){var a,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(N+"/api/settings/all",{headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token"))}});case 3:if(401!==(a=t.sent).status){t.next=9;break}return E(),g.b.error("You are not authorized"),e.push("/"),t.abrupt("return");case 9:return t.next=11,a.json();case 11:(n=t.sent).length>0?c(n.sort((function(e,t){return e.sort-t.sort}))):u(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),u(!0),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[e]);var m=function(e){fetch(N+"/api/settings/toggle",{method:"PUT",headers:{Authorization:"Basic "+btoa(f("login")+":"+f("token")),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);g.b.success("Settings successfully saved")})).catch((function(e){return g.b.error(e?e.message:"Failed to save settings")}))};return r.a.createElement(U,{title:"Settings",subTitle:"Dashboard"},r.a.createElement(B,{title:"Settings list"},n.length>0?n.map((function(e){return r.a.createElement(ce,{key:e._id,data:e,changeSetting:m})})):s?r.a.createElement(K,{message:"Settings not exists"}):r.a.createElement(I,null)))},ie=function(e){var t=e.data;return"full"===e.type?r.a.createElement("div",{className:"command_form"},r.a.createElement("input",{className:"input_text command_name full",type:"text",placeholder:"Command",defaultValue:t.name}),r.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Description",defaultValue:t.text})):r.a.createElement("div",{className:"command_form"},r.a.createElement("input",{className:"input_text command_name",type:"text",placeholder:"Short name",defaultValue:t.short}),r.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Stream category",defaultValue:t.game}))},se=function(){var e=Object(o.useState)([]),t=Object(M.a)(e,2),a=t[0],n=t[1],c=Object(o.useState)(!1),l=Object(M.a)(c,2),i=l[0],s=l[1],u={all:[{name:"!up or !time or !uptime",text:"Stream duration"},{name:"!old or !oldfag or !followage <username or empty>",text:"Channel follow period"},{name:"!ping",text:"Game 'Ping Pong'"},{name:"!size",text:"Game 'Size'"},{name:"!sr <youtube link>",text:"Video request"}],mods:[{name:"!mute, !timeout <username> <duration or empty>",text:"Timeout user"},{name:"!ban, !permit <username> <reason or empty>",text:"Permanent ban user"},{name:"!unban <username>",text:"Unban user"},{name:"!skip",text:"Skip played video"},{name:"!game <full game name or short>",text:"Set stream category. Short name is in the list below"},{name:"!title <text>",text:"Set stream name"},{name:"!poll or !vote <Question | variant1 | variant2 | ...>",text:"Create Strawpoll vote"}]};return Object(o.useEffect)((function(){document.title="xlllBot - All Commands",function(){var e=Object(S.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N+"/api/games");case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0?n(a):s(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s(!0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(U,{title:"General commands"},r.a.createElement(B,{title:"Commands list"},u.all.map((function(e,t){return r.a.createElement(ie,{key:t+"_all",data:e,type:"full"})})),r.a.createElement("h4",{className:"sub_header"},"For moderators and owner"),u.mods.map((function(e,t){return r.a.createElement(ie,{key:t+"_mods",data:e,type:"full"})}))),r.a.createElement(B,{title:"Short categores names list"},a.length>0?a.map((function(e){return r.a.createElement(ie,{key:e._id,data:e,type:"short"})})):i?r.a.createElement(K,{message:"Commands not exists"}):r.a.createElement(I,null)))},ue=function(){return Object(o.useEffect)((function(){document.title="xlllBot - Log in",setTimeout((function(){return window.close()}),2e3)})),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"authModal"},r.a.createElement("h2",{className:"success_title"},"Successfully logged in"),r.a.createElement("div",{className:"auth_text"},"You can now close this window.")))},me=function(){return document.title="xlllBot - Log in",r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"authModal"},r.a.createElement("h2",{className:"error_title"},"Failed to login"),r.a.createElement("div",{className:"auth_text"},"Try again."),r.a.createElement("div",{className:"auth_form"},r.a.createElement("a",{href:N+"/auth/twitch",class:"twitch_btn signin"},r.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},r.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),r.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),r.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch"))))},de=function(){return document.title="xlllBot - 404 Not Found",r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"authModal"},r.a.createElement("h2",null,"404 Not Found"),r.a.createElement("div",{className:"auth_form"},r.a.createElement(d.b,{to:"/",className:"twitch_btn signin"},"Go to home page"))))},he=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){x.on("alert",(function(e){g.b.error(e.message)}))}},{key:"render",value:function(){return r.a.createElement(v,{className:"view"},r.a.createElement(d.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,component:j}),r.a.createElement(y,{path:"/dashboard/channel",component:J}),r.a.createElement(y,{path:"/dashboard/commands",component:Q}),r.a.createElement(y,{path:"/dashboard/badwords",component:ee}),r.a.createElement(y,{path:"/dashboard/videos",component:ne}),r.a.createElement(y,{path:"/dashboard/events",component:re}),r.a.createElement(y,{path:"/dashboard/settings",component:le}),r.a.createElement(_,{path:"/commands",component:se}),r.a.createElement(h.b,{path:"/auth",exact:!0,component:ue}),r.a.createElement(h.b,{path:"/auth/error",component:me}),r.a.createElement(h.b,{component:de}))),r.a.createElement(g.a,{position:"bottom-right",autoClose:2e3,pauseOnFocusLoss:!1}))}}]),a}(o.Component);l.a.render(r.a.createElement(he,null),document.querySelector("#root"))},63:function(e,t,a){e.exports=a(139)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.e6820c6c.chunk.js.map