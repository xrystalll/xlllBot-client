(this["webpackJsonpxlllbot-client"]=this["webpackJsonpxlllbot-client"]||[]).push([[0],{113:function(e,t){},128:function(e,t,a){"use strict";a.r(t);var n,c=a(0),l=a.n(c),r=a(21),o=a.n(r),i=(a(65),a(8)),s=a(9),m=a(11),d=a(10),u=a(12),h=a(4),v=a(19),E=a(52),b=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(E.Scrollbars,{autoHide:!0,renderTrackHorizontal:function(e){return l.a.createElement("div",Object.assign({},e,{className:"track-horizontal"}))},renderTrackVertical:function(e){return l.a.createElement("div",Object.assign({},e,{className:"track-vertical"}))},renderThumbHorizontal:function(e){return l.a.createElement("div",Object.assign({},e,{className:"thumb-horizontal"}))},renderThumbVertical:function(e){return l.a.createElement("div",Object.assign({},e,{className:"thumb-vertical"}))},renderView:function(t){return l.a.createElement("div",Object.assign({},t,{className:e.props.className}))}},this.props.children)}}]),t}(c.Component),p=a(59),f="http://localhost:7000",g=localStorage.getItem("userLogin"),_="Basic "+btoa("xlllClient:"+localStorage.getItem("userHash")),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={showMenu:!1,channel:g,logo:localStorage.getItem("userLogo")},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick.bind(this),!1)}},{key:"toggleMenu",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"closeMenu",value:function(){this.setState({showMenu:!1})}},{key:"handleOutsideClick",value:function(e){e.target.closest(".open")||this.closeMenu()}},{key:"render",value:function(){var e=this.state,t=e.channel,a=e.logo,n=this.state.showMenu?"open":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{id:"header",className:n},l.a.createElement("div",{className:"logo"},l.a.createElement("i",{onClick:this.toggleMenu.bind(this),className:"logo__trigger material-icons"},"menu"),l.a.createElement("h1",null,"xlllBot")),l.a.createElement("ul",{className:"top-menu"},l.a.createElement("li",{className:"top-menu__profile"},l.a.createElement(h.b,{to:"/dashboard/channel"},l.a.createElement("span",{className:"userName"},t||""),l.a.createElement("img",{className:"userPhoto",src:a||"",alt:""}))))),l.a.createElement("aside",{id:"navigation",className:n},l.a.createElement(b,{className:"navigation__menu"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(h.c,{exact:!0,to:"/",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"home"),"Home")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/channel",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"person"),"Channel")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/commands",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"format_list_bulleted"),"Commands")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/badwords",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"voice_over_off"),"Badwords")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/songs",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"playlist_play"),"Stream Dj")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/events",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"playlist_add_check"),"Events")),l.a.createElement("li",null,l.a.createElement(h.c,{to:"/dashboard/settings",onClick:this.closeMenu.bind(this)},l.a.createElement("i",{className:"material-icons"},"settings"),"Settings"))))))}}]),t}(c.Component),O=a(2),y=function(e){var t=e.component,a=Object(p.a)(e,["component"]),n=!!localStorage.getItem("userHash");return n||O.b.error("You are not authorized",{position:O.b.POSITION.BOTTOM_RIGHT}),l.a.createElement(v.b,Object.assign({},a,{render:function(e){return n?l.a.createElement("div",{className:"content"},l.a.createElement(N,null),l.a.createElement(t,e)):l.a.createElement(v.a,{to:{pathname:"/",state:{from:e.location}}})}}))},w=a(55),k=a.n(w)()(f),T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={authClicked:!1,isAuth:!1},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="xlllBot",k.on("user_data",(function(t){t.error||e.state.authClicked&&!localStorage.getItem("userHash")&&(e.setState({isAuth:!0}),localStorage.setItem("userLogin",t[0].login),localStorage.setItem("userHash",t[0].hash),localStorage.setItem("userLogo",t[0].logo),window.location.reload())}))}},{key:"openAuth",value:function(e,t){this.setState({authClicked:!0}),window.open(e,"Sign in via Twitch","height=520,width=480")}},{key:"render",value:function(){return l.a.createElement("main",{className:"landing"},l.a.createElement("div",{className:"bg"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"landing_content"},l.a.createElement("h1",{className:"main_head"},"xlllBot"),l.a.createElement("div",{className:"main_sub"},"Chat bot for Twitch"),l.a.createElement("div",{className:"auth_block_main"},localStorage.getItem("userHash")||this.state.isAuth?l.a.createElement(h.b,{className:"twitch_btn_main",to:"/dashboard/channel"},"Open dashboard"):l.a.createElement("div",{onClick:this.openAuth.bind(this,f+"/auth/twitch"),className:"twitch_btn_main"},l.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},l.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),l.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),l.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch"))),l.a.createElement("div",{className:"main_copy"},l.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll"))))}}]),t}(c.Component),x=a(13),I=a.n(x),S=a(17),j=a(14),M=function(){return l.a.createElement("footer",{className:"content--boxed-sm",id:"footer"},l.a.createElement("div",{className:"other_copy"},"xlllBot 2020 ",l.a.createElement("a",{href:"https://github.com/xrystalll",target:"_blank",rel:"noopener noreferrer"},"by xrystalll")),l.a.createElement("ul",{className:"footer__menu"},l.a.createElement("li",null,l.a.createElement(h.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/commands"},"Commands")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/badwords"},"Badwords")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/dashboard/settings"},"Settings"))))},C=function(){return l.a.createElement("div",{className:"content_loader"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},l.a.createElement("circle",{cx:"50",cy:"50",fill:"none",stroke:"#fff",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(359.289 50.0009 50.0009)"},l.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1.2s",begin:"0s",repeatCount:"indefinite"}))))},B=function(){Object(c.useEffect)((function(){document.title="xlllBot - Channel",r()}),[]);var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(S.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+"/api/channel",{headers:{Authorization:_}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n(a[0]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm videoblock"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Channel ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("div",{id:"content_inner",className:"videos_inner"},l.a.createElement("div",{className:"vid-main-wrapper"},l.a.createElement("div",{className:"vid-container"},a?l.a.createElement("iframe",{title:"TwitchPlayer",src:"https://player.twitch.tv/?channel=".concat(localStorage.getItem("userLogin")),frameBorder:"0",allowFullScreen:!0,scrolling:"no",width:"560",height:"384"}):l.a.createElement(C,null)),l.a.createElement("div",{className:"vid-list-container"},l.a.createElement("ul",null,l.a.createElement("ol",{id:"vid-list",style:{lineHeight:0}},a?l.a.createElement("iframe",{title:"TwitchChat",src:"https://www.twitch.tv/embed/".concat(localStorage.getItem("userLogin"),"/chat?darkpopout"),frameBorder:"0",scrolling:"no",width:"284",height:"384"}):null)))))))))),l.a.createElement(M,null))},L=a(18),P=function(e){return l.a.createElement("div",{className:"empty-results"},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:112,height:112,viewBox:"0 0 24 24"},l.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),l.a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:"#c4c4c5"})),l.a.createElement("div",{className:"empty_words"},l.a.createElement("div",{className:"empty_top"},e.message)))},H=function(){Object(c.useEffect)((function(){document.title="xlllBot - Commands",E()}),[]);var e=Object(c.useState)(!1),t=Object(j.a)(e,2),a=t[0],n=t[1],r=function(){n(!a)},o=Object(c.useState)(!1),i=Object(j.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)([]),u=Object(j.a)(d,2),h=u[0],v=u[1],E=function(){var e=Object(S.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/api/commands/all",{headers:{Authorization:_}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0?(a.reverse(),v(a)):m(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),b=function(e,t){v(h.filter((function(t){return t._id!==e}))),0===h.filter((function(t){return t._id!==e})).length&&(v([]),m(!0)),fetch(f+"/api/commands/delete?id="+e,{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(){return O.b.success("Command successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to delete command",{position:O.b.POSITION.BOTTOM_RIGHT})}))},p=function(e,t){var a=t.currentTarget.closest(".command_form"),n=a.children[1].value,c=a.children[2].value;n.trim().length<1?(O.b.error("Enter command tag",{position:O.b.POSITION.BOTTOM_RIGHT}),a.children[1].classList.add("error")):c.trim().length<1?(O.b.error("Enter text",{position:O.b.POSITION.BOTTOM_RIGHT}),a.children[1].classList.remove("error"),a.children[2].classList.add("error")):(a.children[1].classList.remove("error"),a.children[2].classList.remove("error"),g(t),fetch(f+"/api/commands/edit?id=".concat(e,"&tag=").concat(n.trim(),"&text=")+c.trim(),{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(){return O.b.success("Command successfully changed",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to change command",{position:O.b.POSITION.BOTTOM_RIGHT})})))},g=function(e){var t=e.currentTarget.closest(".command_form");t.children[1].classList.toggle("active"),t.children[2].classList.toggle("active"),t.children[3].children[0].classList.toggle("none"),t.children[3].children[1].classList.toggle("none")};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Commands ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Commands list"),l.a.createElement("div",{onClick:r,className:"item_add command_add",title:"Add new command"},l.a.createElement("i",{className:"material-icons"},"add")),l.a.createElement("div",{id:"content_inner"},a?l.a.createElement("div",{className:"command_form"},l.a.createElement("div",{className:"command_prefix"},"!"),l.a.createElement("input",{className:"input_text command_name active",type:"text",placeholder:"Enter command"}),l.a.createElement("input",{className:"input_text command_text active",type:"text",placeholder:"Enter text"}),l.a.createElement("div",{className:"command_actions"},l.a.createElement("i",{onClick:r,className:"item_cancel command_new_cancel material-icons",title:"Chancel new command"},"close"),l.a.createElement("input",{onClick:function(e){var t=e.currentTarget.closest(".command_form"),a=t.children[1].value,n=t.children[2].value;a.trim().length<1?(O.b.error("Enter command tag",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[1].classList.add("error")):n.trim().length<1?(O.b.error("Enter text",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[1].classList.remove("error"),t.children[2].classList.add("error")):(t.children[1].classList.remove("error"),t.children[2].classList.remove("error"),fetch(f+"/api/commands/add?tag=".concat(a.trim().replace("!",""),"&text=")+n.trim(),{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw P("Failed to adding command");m(!1),v([e].concat(Object(L.a)(h))),r(),O.b.success("Command successfully added",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to adding command",{position:O.b.POSITION.BOTTOM_RIGHT})})))}.bind(void 0),className:"command_create btn",type:"submit",value:"Add"}))):null,h.length>0?h.map((function(e){return l.a.createElement("div",{className:"command_form",key:e._id},l.a.createElement("div",{className:"command_prefix"},"!"),l.a.createElement("input",{className:"input_text command_name",type:"text",placeholder:"Enter command",defaultValue:e.tag}),l.a.createElement("input",{className:"input_text command_text",type:"text",placeholder:"Enter text",defaultValue:e.text}),l.a.createElement("div",{className:"command_actions"},l.a.createElement("div",{className:"action_block"},l.a.createElement("i",{onClick:g.bind(void 0),className:"command_edit material-icons",title:"Edit command"},"create"),l.a.createElement("i",{onClick:b.bind(void 0,e._id),className:"item_delete command_delete material-icons",title:"Delete command"},"delete")),l.a.createElement("div",{className:"action_block none"},l.a.createElement("i",{onClick:g.bind(void 0),className:"item_cancel command_edit_cancel material-icons",title:"Cancel changes"},"close"),l.a.createElement("input",{onClick:p.bind(void 0,e._id),className:"command_save btn",type:"submit",value:"Save"}))))})):s?l.a.createElement(P,{message:"No commands yet"}):l.a.createElement(C,null))))))),l.a.createElement(M,null))},D=function(){Object(c.useEffect)((function(){document.title="xlllBot - Badwords",E()}),[]);var e=Object(c.useState)(!1),t=Object(j.a)(e,2),a=t[0],n=t[1],r=function(){n(!a)},o=Object(c.useState)(!1),i=Object(j.a)(o,2),s=i[0],m=i[1],d=Object(c.useState)([]),u=Object(j.a)(d,2),h=u[0],v=u[1],E=function(){var e=Object(S.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/api/words/all",{headers:{Authorization:_}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0?(a.reverse(),v(a)):m(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),b=function(e,t){v(h.filter((function(t){return t._id!==e}))),0===h.filter((function(t){return t._id!==e})).length&&(v([]),m(!0)),fetch(f+"/api/words/delete?id="+e,{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(){return O.b.success("Badword successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to delete badword",{position:O.b.POSITION.BOTTOM_RIGHT})}))};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Badwords ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Badwords list"),l.a.createElement("div",{onClick:r,className:"item_add badword_add",title:"Add new badword"},l.a.createElement("i",{className:"material-icons"},"add")),l.a.createElement("div",{id:"content_inner"},a?l.a.createElement("div",{className:"command_form"},l.a.createElement("input",{className:"input_text badword_name active",type:"text",placeholder:"Enter badword"}),l.a.createElement("input",{className:"input_text badword_duration active",type:"number",placeholder:"Enter ban duration",defaultValue:"300"}),l.a.createElement("div",{className:"channel_actions"},l.a.createElement("i",{onClick:r,className:"item_cancel badword_new_cancel material-icons",title:"Cancel new badword"},"close"),l.a.createElement("input",{onClick:function(e){var t=e.currentTarget.closest(".command_form"),a=t.children[0].value,n=t.children[1].value;a.trim().length<1?(O.b.error("Enter name",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[0].classList.add("error")):n.trim().length<1?(O.b.error("Enter duration",{position:O.b.POSITION.BOTTOM_RIGHT}),t.children[0].classList.remove("error"),t.children[1].classList.add("error")):(t.children[0].classList.remove("error"),t.children[1].classList.remove("error"),fetch(f+"/api/words/add?word=".concat(a.trim(),"&duration=")+n.trim(),{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(e){if(e.error)throw P("Failed to adding badword");m(!1),v([e].concat(Object(L.a)(h))),r(),O.b.success("Badword successfully added",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to adding badword",{position:O.b.POSITION.BOTTOM_RIGHT})})))}.bind(void 0),className:"badword_create btn",type:"submit",value:"Add"}))):null,h.length>0?h.map((function(e){return l.a.createElement("div",{className:"command_form",key:e._id},l.a.createElement("input",{className:"input_text badword_name",type:"text",placeholder:"Badword",defaultValue:e.word}),l.a.createElement("input",{className:"input_text badword_duration",type:"text",placeholder:"Ban duration",defaultValue:e.duration}),l.a.createElement("div",{className:"channel_actions"},l.a.createElement("i",{onClick:b.bind(void 0,e._id),className:"item_delete badword_delete material-icons",title:"Delete badword"},"delete")))})):s?l.a.createElement(P,{message:"No badwords yet"}):l.a.createElement(C,null))))))),l.a.createElement(M,null))},R=a(22),G=a(56),A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={response:[],playIndex:0,noData:!1},e.playBtnRef=l.a.createRef(),e.onPlay=e.onPlay.bind(Object(R.a)(e)),e.onPause=e.onPause.bind(Object(R.a)(e)),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="xlllBot - Stream Dj",k.emit("video_items",{channel:g}),k.on("output_videos",(function(t){t.length>0?e.setState({response:t}):e.setState({noData:!0})})),this.subscribeToEvents()}},{key:"subscribeToEvents",value:function(){var e=this;k.on("new_video",(function(t){t.channel===g&&e.setState({response:[].concat(Object(L.a)(e.state.response),[t]),noData:!1})})),k.on("deteted",(function(t){e.setState({response:e.state.response.filter((function(e){return e._id!==t.id}))}),O.b.success("Video successfully removed",{position:O.b.POSITION.BOTTOM_RIGHT}),0===e.state.response.filter((function(e){return e._id!==t.id})).length&&e.setState({noData:!0})})),k.on("skip",(function(t){t.channel===g&&1===n.getPlayerState()&&e.skip()}))}},{key:"deleteVideo",value:function(e,t){t.stopPropagation(),k.emit("delete_video",{id:e,channel:g})}},{key:"toHHMMSS",value:function(e){var t=parseInt(e,10),a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),c=t-3600*a-60*n;return a>0&&(a+=":"),c<10&&(c="0"+c),a+n+":"+c}},{key:"counter",value:function(e){return 0===e?0:e<1e3?e:e>=1e3&&e<1e6?"".concat(+(e/1e3).toFixed(1),"K"):e>=1e6&&e<1e9?"".concat(+(e/1e6).toFixed(1),"M"):e>=1e9&&e<1e12?"".concat(+(e/1e9).toFixed(1),"B"):void 0}},{key:"youtubeId",value:function(e){var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return null!==t?t[1]:0}},{key:"onPlayerReady",value:function(e){n=e.target}},{key:"onPlay",value:function(){this.playBtnRef.current.classList.add("playing")}},{key:"onPause",value:function(){this.playBtnRef.current.classList.remove("playing")}},{key:"onPlayPause",value:function(){void 0!==n&&(1===n.getPlayerState()?n.pauseVideo():n.playVideo())}},{key:"chooseVideo",value:function(e,t){this.setState({playIndex:Number(e.index)}),void 0!==n&&n.loadVideoById(this.youtubeId(e.url))}},{key:"skip",value:function(){var e=this.state.response;if(0!==e.length){var t=this.state.playIndex+1;t>=e.length&&(t=0),this.setState({playIndex:t});var a=e[t].url;void 0!==n&&n.loadVideoById(this.youtubeId(a))}}},{key:"render",value:function(){var e=this,t=this.state.response;return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm videoblock"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Stream Dj ",l.a.createElement("small",null,"Dashboard")),l.a.createElement("div",{className:"controls"},l.a.createElement("div",{ref:this.playBtnRef,onClick:this.onPlayPause,className:"play_btn play",title:"Play/Pause"}),l.a.createElement("div",{onClick:this.skip.bind(this),className:"play_btn skip small",title:"Skip"}))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("div",{id:"content_inner",className:"videos_inner"},l.a.createElement("div",{className:"vid-main-wrapper"},l.a.createElement("div",{className:"vid-container"},t.length>0?l.a.createElement(G.a,{opts:{height:"384",width:"560",playerVars:{autoplay:0}},videoId:this.youtubeId(t[0].url),containerClassName:"iframe",onReady:this.onPlayerReady,onPlay:this.onPlay,onPause:this.onPause,onEnd:this.skip.bind(this)}):this.state.noData?l.a.createElement(P,{message:"No videos yet"}):l.a.createElement(C,null)),l.a.createElement("div",{className:"vid-list-container"},l.a.createElement(b,{className:"view"},l.a.createElement("ul",null,l.a.createElement("ol",{id:"vid-list"},t.length>0?t.map((function(t,a){return l.a.createElement("li",{key:t._id,onClick:e.chooseVideo.bind(e,{url:t.url,index:a}),className:"videoItem".concat(e.state.playIndex===a?" selected":"")},l.a.createElement("div",{className:"chooseVid"},l.a.createElement("span",{className:"vid-thumb",style:{backgroundImage:"url(".concat(t.thumb,")")}},l.a.createElement("div",{className:"vidDuration"},e.toHHMMSS(t.duration))),l.a.createElement("div",{className:"vidInfo"},l.a.createElement("div",{className:"desc"},t.title),l.a.createElement("div",{className:"owner"},t.owner),l.a.createElement("div",{className:"views"},e.counter(t.views)," views")),l.a.createElement("div",{onClick:e.deleteVideo.bind(e,t._id),className:"removeVid",title:"Remove video from playlist"},l.a.createElement("i",{className:"material-icons"},"delete"))))})):null))))))))))),l.a.createElement(M,null))}}]),t}(c.Component),F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).state={response:[],noData:!1,showClear:!0},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="xlllBot - Events",k.emit("event_items",{channel:g}),k.on("output_events",(function(t){t.length>0?e.setState({response:t}):e.setState({noData:!0})})),this.subscribeToEvents()}},{key:"subscribeToEvents",value:function(){var e=this;k.on("events_deleted",(function(t){t.deletedCount>0?O.b.success("Old events successfully deleted",{position:O.b.POSITION.BOTTOM_RIGHT}):(O.b.info("Nothing to clear",{position:O.b.POSITION.BOTTOM_RIGHT}),e.setState({showClear:!1}))})),k.on("new_event",(function(t){t.channel===g&&e.setState({response:[t].concat(Object(L.a)(e.state.response)),noData:!1})}))}},{key:"deleteEvents",value:function(){k.emit("delete_events",{channel:g})}},{key:"timeFormat",value:function(e){var t,a=new Date,n=new Date(Number(e)),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=a.getFullYear(),r=c[a.getMonth()],o=a.getDate(),i=n.getFullYear(),s=c[n.getMonth()],m=n.getDate(),d=n.getHours(),u=n.getMinutes()<10?"0".concat(n.getMinutes()):n.getMinutes();return t=i!==l?" ".concat(i):"","".concat(m,".").concat(s,".").concat(i)==="".concat(o,".").concat(r,".").concat(l)?"today at ".concat(d,":").concat(u):"".concat(m,".").concat(s,".").concat(i)==="".concat(o-1,".").concat(r,".").concat(l)?"yesterday at ".concat(d,":").concat(u):"".concat(m," ").concat(s).concat(t," at ").concat(d,":").concat(u)}},{key:"render",value:function(){var e=this,t=this.state.response,a=this.state.showClear?"":" none";return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Events ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Chat events by last 24 hrs"),this.state.noData?null:l.a.createElement("div",{className:"clear".concat(a),onClick:this.deleteEvents},l.a.createElement("i",{className:"material-icons"},"delete"),l.a.createElement("span",null,"Delete events older than 24 hours")),l.a.createElement("div",{id:"content_inner"},t.length>0?t.reverse().map((function(t){return l.a.createElement("div",{className:"event_item",key:t._id},l.a.createElement("div",{className:"event_time"},e.timeFormat(t.time)),l.a.createElement("div",null,t.text))})):this.state.noData?l.a.createElement(P,{message:"No events yet"}):l.a.createElement(C,null))))))),l.a.createElement(M,null))}}]),t}(c.Component),V=function(){Object(c.useEffect)((function(){document.title="xlllBot - Settings",r()}),[]);var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(S.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"/api/settings/all",{headers:{Authorization:_}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),o=function(e){var t=e.currentTarget.htmlFor,a=!e.currentTarget.parentNode.children[0].checked;fetch(f+"/api/settings?name=".concat(t,"&state=")+a,{headers:{Authorization:_}}).then((function(e){return e.json()})).then((function(){return O.b.success("Settings successfully saved",{position:O.b.POSITION.BOTTOM_RIGHT})})).catch((function(){return O.b.error("Failed to save settings",{position:O.b.POSITION.BOTTOM_RIGHT})}))};return l.a.createElement("section",{id:"main"},l.a.createElement("section",{id:"content"},l.a.createElement("div",{className:"content--boxed-sm"},l.a.createElement("header",{className:"content__header"},l.a.createElement("h2",null,"Settings ",l.a.createElement("small",null,"Dashboard"))),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__body"},l.a.createElement("div",{className:"card__sub"},l.a.createElement("h4",null,"Settings list"),l.a.createElement("div",{id:"content_inner"},a.length>0?a.map((function(e){return l.a.createElement("div",{className:"md-checkbox",key:e._id},l.a.createElement("input",{id:e.name,type:"checkbox",defaultChecked:e.state}),l.a.createElement("label",{htmlFor:e.name,onClick:o.bind(void 0),className:"setting_item"},l.a.createElement("span",null,e.description)))})):l.a.createElement(C,null))))))),l.a.createElement(M,null))},z=function(){return document.title="xlllBot - Log in",l.a.createElement("div",{className:"authModal"},l.a.createElement("h2",{className:"success_title"},"Successfully logged in"),l.a.createElement("div",{className:"auth_text"},"You can now close this window."))},W=function(){return document.title="xlllBot - Log in",l.a.createElement("div",{className:"authModal"},l.a.createElement("h2",{className:"error_title"},"Failed to login"),l.a.createElement("div",{className:"auth_text"},"Try again."),l.a.createElement("div",{className:"auth_form"},l.a.createElement("a",{href:f+"/auth/twitch",class:"twitch_btn signin"},l.a.createElement("svg",{className:"tw-glitch-logo__svg",overflow:"visible",width:"40px",height:"40px",version:"1.1",viewBox:"0 0 40 40",x:"0px",y:"0px"},l.a.createElement("polygon",{className:"tw-glitch-logo__body",points:"13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8"}),l.a.createElement("polygon",{className:"tw-glitch-logo__face",points:"26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25",transform:"translate(0 0)"}),l.a.createElement("path",{className:"tw-glitch-logo__eyes",d:"M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z",transform:"translate(0 0)"})),"Sign in via Twitch")))},J=function(){return document.title="xlllBot - 404 Not Found",l.a.createElement("div",{className:"authModal"},l.a.createElement("h2",null,"404 Not Found"),l.a.createElement("div",{className:"auth_form"},l.a.createElement(h.b,{to:"/",className:"twitch_btn signin"},"Go to home page")))};O.b.configure({autoClose:3e3});var Y=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){k.on("alert",(function(e){O.b.error(e.message,{position:O.b.POSITION.BOTTOM_RIGHT})}))}},{key:"render",value:function(){return l.a.createElement(b,{className:"view"},l.a.createElement(h.a,null,l.a.createElement(v.d,null,l.a.createElement(v.b,{path:"/",exact:!0,component:T}),l.a.createElement(y,{path:"/dashboard/channel",component:B}),l.a.createElement(y,{path:"/dashboard/commands",component:H}),l.a.createElement(y,{path:"/dashboard/badwords",component:D}),l.a.createElement(y,{path:"/dashboard/songs",component:A}),l.a.createElement(y,{path:"/dashboard/events",component:F}),l.a.createElement(y,{path:"/dashboard/settings",component:V}),l.a.createElement(v.b,{path:"/auth",exact:!0,component:z}),l.a.createElement(v.b,{path:"/auth/error",component:W}),l.a.createElement(v.b,{component:J}))),l.a.createElement(O.a,null))}}]),t}(c.Component),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!==a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(l.a.createElement(Y,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker.")}))):Z(t,e)}))}}()},60:function(e,t,a){e.exports=a(128)},65:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.16bd2264.chunk.js.map